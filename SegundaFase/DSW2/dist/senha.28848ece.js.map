{"mappings":"AAAA,SAAS,gBAAgB,CAAC,oBAAoB;IAC5C,MAAM,qBAAqB,SAAS,aAAa,CAAC;IAClD,MAAM,YAAY,IAAI,gBAAgB,OAAO,QAAQ,CAAC,MAAM;IAC5D,MAAM,SAAS,UAAU,GAAG,CAAC;IAE7B,gFAAgF;IAChF,IAAI,QACF;IAGF,0DAA0D;IAC1D,SAAS;QACP,mBAAmB,SAAS,GAAG,CAAC;;;;;;IAMhC,CAAC;QAED,mEAAmE;QACnE,mBAAmB,gBAAgB,CAAC,UAAU,OAAO;YACnD,MAAM,cAAc;YAEpB,iCAAiC;YACjC,MAAM,YAAY,SAAS,cAAc,CAAC,cAAc,KAAK;YAC7D,MAAM,iBAAiB,SAAS,cAAc,CAAC,mBAAmB,KAAK;YAEvE,gCAAgC;YAChC,IAAI,cAAc,gBAAgB;gBAChC,MAAM;gBACN;YACF;YAEA,wCAAwC;YACxC,IAAI;gBACF,MAAM,WAAW,MAAM,MAAM,CAAC,+BAA+B,EAAE,QAAQ,EAAE;oBACvE,QAAQ;oBACR,SAAS;wBACP,gBAAgB;oBAClB;oBACA,MAAM,KAAK,SAAS,CAAC;wBAAE,OAAO;oBAAU;gBAC1C;gBAEA,IAAI,SAAS,EAAE,EAAE;oBACf,MAAM;oBACN,OAAO,QAAQ,CAAC,IAAI,GAAG,cAAc,qCAAqC;gBAC5E,OACE,MAAM,IAAI,MAAM;YAEpB,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,4BAA4B;gBAC1C,MAAM;YACR;QACF;IACF;IAEA,oFAAoF;IACpF,IAAI,CAAC,QACH,mBAAmB,gBAAgB,CAAC,UAAU,OAAO;QACnD,MAAM,cAAc;QAEpB,gCAAgC;QAChC,MAAM,QAAQ,mBAAmB,aAAa,CAAC,uBAAuB,KAAK;QAE3E,kBAAkB;QAClB,MAAM,aAAa;IACrB;IAGF,8CAA8C;IAC9C,eAAe,aAAa,KAAK;QAC/B,IAAI;YACF,yCAAyC;YACzC,MAAM,WAAW,MAAM,MAAM;YAC7B,MAAM,WAAW,MAAM,SAAS,IAAI;YAEpC,mDAAmD;YACnD,MAAM,UAAU,SAAS,IAAI,CAAC,CAAC,OAAS,KAAK,KAAK,KAAK;YAEvD,IAAI,SACF,qEAAqE;YACrE,OAAO,QAAQ,CAAC,IAAI,GAAG,CAAC,cAAc,EAAE,QAAQ,EAAE,EAAE;iBAEpD,yBAAyB;YACzB,MAAM;QAEV,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,2BAA2B;YACzC,MAAM;QACR;IACF;AACF","sources":["js/senha.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\r\n  const formRecuperarSenha = document.querySelector('form');\r\n  const urlParams = new URLSearchParams(window.location.search);\r\n  const userId = urlParams.get('id');\r\n\r\n  // Se o ID do usuário estiver na URL, exibe o formulário de redefinição de senha\r\n  if (userId) {\r\n    exibirFormularioRedefinicao();\r\n  }\r\n\r\n  // Função para exibir o formulário de redefinição de senha\r\n  function exibirFormularioRedefinicao() {\r\n    formRecuperarSenha.innerHTML = `\r\n      <h2 class=\"text-blue-900 mb-5 text-2xl\">Redefinir Senha</h2>\r\n      <p class=\"text-gray-700 mb-5\">Digite sua nova senha abaixo.</p>\r\n      <input type=\"password\" id=\"nova-senha\" placeholder=\"Nova Senha\" required class=\"p-2 border border-gray-300 rounded-md mb-4\">\r\n      <input type=\"password\" id=\"confirmar-senha\" placeholder=\"Confirmar Nova Senha\" required class=\"p-2 border border-gray-300 rounded-md mb-4\">\r\n      <button type=\"submit\" class=\"btn-primary bg-orange-500 text-white p-2 rounded-md hover:bg-orange-600\">Redefinir Senha</button>\r\n    `;\r\n\r\n    // Adiciona o evento de envio do formulário de redefinição de senha\r\n    formRecuperarSenha.addEventListener('submit', async (event) => {\r\n      event.preventDefault();\r\n\r\n      // Coleta as senhas do formulário\r\n      const novaSenha = document.getElementById('nova-senha').value;\r\n      const confirmarSenha = document.getElementById('confirmar-senha').value;\r\n\r\n      // Valida se as senhas coincidem\r\n      if (novaSenha !== confirmarSenha) {\r\n        alert('As senhas não coincidem. Tente novamente.');\r\n        return;\r\n      }\r\n\r\n      // Envia a nova senha para o JSON Server\r\n      try {\r\n        const response = await fetch(`http://localhost:3000/usuarios/${userId}`, {\r\n          method: 'PATCH',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify({ senha: novaSenha }),\r\n        });\r\n\r\n        if (response.ok) {\r\n          alert('Senha redefinida com sucesso!');\r\n          window.location.href = 'login.html'; // Redireciona para a página de login\r\n        } else {\r\n          throw new Error('Erro ao redefinir senha');\r\n        }\r\n      } catch (error) {\r\n        console.error('Erro ao redefinir senha:', error);\r\n        alert('Erro ao redefinir senha. Tente novamente.');\r\n      }\r\n    });\r\n  }\r\n\r\n  // Se o ID do usuário não estiver na URL, exibe o formulário de recuperação de senha\r\n  if (!userId) {\r\n    formRecuperarSenha.addEventListener('submit', async (event) => {\r\n      event.preventDefault();\r\n\r\n      // Coleta o e-mail do formulário\r\n      const email = formRecuperarSenha.querySelector('input[type=\"email\"]').value;\r\n\r\n      // Valida o e-mail\r\n      await validarEmail(email);\r\n    });\r\n  }\r\n\r\n  // Função para validar o e-mail e redirecionar\r\n  async function validarEmail(email) {\r\n    try {\r\n      // Busca todos os usuários no JSON Server\r\n      const response = await fetch('http://localhost:3000/usuarios');\r\n      const usuarios = await response.json();\r\n\r\n      // Verifica se há um usuário com o e-mail fornecido\r\n      const usuario = usuarios.find((user) => user.email === email);\r\n\r\n      if (usuario) {\r\n        // E-mail válido: redireciona para a mesma página com o ID do usuário\r\n        window.location.href = `senha.html?id=${usuario.id}`;\r\n      } else {\r\n        // Exibe mensagem de erro\r\n        alert('E-mail não encontrado. Verifique o e-mail digitado.');\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro ao validar e-mail:', error);\r\n      alert('Erro ao tentar recuperar senha. Tente novamente.');\r\n    }\r\n  }\r\n});"],"names":[],"version":3,"file":"senha.28848ece.js.map","sourceRoot":"/__parcel_source_root/"}